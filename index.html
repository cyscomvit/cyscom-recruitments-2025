<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com https://www.gstatic.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://apis.google.com https://*.googleusercontent.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; img-src 'self' data: https: https://*.googleusercontent.com https://*.googleapis.com; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://ipapi.co https://accounts.google.com https://oauth2.googleapis.com https://www.googleapis.com https://securetoken.googleapis.com https://identitytoolkit.googleapis.com; font-src 'self' https://cdn.jsdelivr.net; frame-src 'self' https://accounts.google.com https://*.firebaseapp.com; child-src 'self' https://accounts.google.com;">
    
    <title>Cyscom Recuitments 2025</title>
    <link rel="shortcut icon" href="Images/logo.png" type="image/x-icon">
    <link rel="icon" href="Images/logo.png" type="image/png">
    <link rel="apple-touch-icon" href="Images/logo.png">
    
    

    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="Particles.css" as="style">

    <link rel="preload" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css" as="style">
    
    <link rel="preload" href="./Futura-Bold.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="./HelveticaNowText-Regular.ttf" as="font" type="font/ttf" crossorigin>
    
    <link rel="preload" href="Images/Background.png" as="image">
    
    <link rel="preload" href="Images/logo.png" as="image">
    
    <link rel="preload" href="./video.webm" as="video" type="video/webm">
    

    <link rel="preload" href="Images/Tech.png" as="image">
    <link rel="preload" href="Images/Design.png" as="image">
    <link rel="preload" href="Images/dEV.png" as="image">
    <link rel="preload" href="Images/SM.png" as="image">
    <link rel="preload" href="Images/Content.png" as="image">
    <link rel="preload" href="Images/EM.png" as="image">
    
    <link rel="preload" href="Images/Eve1.png" as="image">
    <link rel="preload" href="Images/Eve2.png" as="image">
    <link rel="preload" href="Images/Eve3.png" as="image">
    <link rel="preload" href="Images/Eve4.png" as="image">
    
    <!-- 8. Preload Critical JavaScript Libraries -->
    <link rel="preload" href="https://unpkg.com/react@18/umd/react.production.min.js" as="script">
    <link rel="preload" href="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" as="script">
    <link rel="preload" href="https://unpkg.com/@babel/standalone/babel.min.js" as="script">
    
    <!-- 9. Preload Particles Script for Faster Loading -->
    <link rel="preload" href="SimpleParticles.js" as="script">
    
    <!-- 9. Preload Critical Local Scripts -->
    <link rel="preload" href="firebase-env.js" as="script">
    <link rel="preload" href="firebase-config.js" as="script">
    <link rel="preload" href="security-utils.js" as="script">
    <link rel="preload" href="app.js" as="script">
    
    <!-- 10. Preload Animation Libraries -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.js" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" as="script">
    
    <!-- 11. Preload Additional Components -->
    <link rel="preload" href="glitch-text-component.js" as="script">
    <link rel="preload" href="tilted-card.js" as="script">
    
    <!-- Load Stylesheets (after preloading) -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="Particles.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css">
    
    <!-- DNS Prefetch for External Domains (Performance Optimization) -->
    <link rel="dns-prefetch" href="//unpkg.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//www.gstatic.com">
    <link rel="dns-prefetch" href="//apis.google.com">
    <link rel="dns-prefetch" href="//accounts.google.com">
    
    <!-- Preconnect to Critical External Services -->
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://apis.google.com" crossorigin>
    
    <!-- React and Babel CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- IMMEDIATE PARTICLES SCRIPT LOADING - Load particles ASAP after React -->
    <script>
        // Start particles initialization checks immediately
        if (window.React && window.ReactDOM) {
            console.log('Loading');
        }
    </script>
    
    <!-- Firebase Configuration (load environment first, then config) -->
    <script src="firebase-env.js"></script>
    <script src="firebase-config.js"></script>
    
    <!-- Security Utilities -->
    <script src="security-utils.js"></script>
    
</head>

<body>
    <div id="nav">
        <div id="nav-part1">
            <img src="Images/logo.png" alt="Logo" style="height: 80px;">
        </div>
        <div id="nav-part2">
            <div id="links">
                <a href="#page1" id="home-link">HOME</a>
                <a href="#moto" id="about-link">ABOUT</a>
                <a href="#page2" id="register-link">DEPARTMENTS</a>
                <a href="#page4" id="recruitment-link">APPLY NOW</a>
            </div>
        </div>
    </div>
    <div id="cursor"></div>
    <div id="main">
    <div id="page1">
            <!-- Particles Background -->
            <div id="particles-background" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;"></div>
            
            <div class="top-spacer"></div>
            <h1 class="main-title">CYSCOM</h1>
            <h1 class="main-title">RECRUITMENTS</h1>
            <h1 class="main-title">2025</h1>
            <div class="bottom-spacer"></div>
            <div id="video-container">
                <div id="play">PLAY</div>
                <video autoplay playsinline muted loop preload="auto" poster="Images/poster.png" src="./video.webm" style="display:block; margin:auto;"></video>
            </div>
        </div>
        <div id="page2">
            <div id="slider-container">
                <div id="slider-wrapper">
                    <!-- Original slides -->
                    <div id="elem1" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\Tech.png"
                            alt="" style="width:280px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #013066;">
                                <i class="ri-circle-fill"></i>
                                <p><b>TECHNICAL</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #06b1bd;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Dive into cybersecurity challenges, build tools, and sharpen your hacking skills while working on real-world security projects.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem2" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\Design.png"
                            alt="" style="width:420px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #0484ac;">
                                <i class="ri-circle-fill"></i>
                                <p><b>DESIGN</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #06b1bd;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Transform ideas into impactful visuals logos, posters, and graphics that define our brand identity.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem3" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\dEV.png"
                            alt="" style="width:250px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #040277;">
                                <i class="ri-circle-fill"></i>
                                <p><b>DEV</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Craft and maintain sleek, secure, and functional web experiences for Cyscom’s events and platforms.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem4" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\SM.png"
                            alt="" style="width:320px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #2c4cb8;">
                                <i class="ri-circle-fill"></i>
                                <p><b>SOCIAL MEDIA</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Shape Cyscom’s online presence with creative posts, trending content, and engaging campaigns.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem5" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\Content.png"
                            alt="" style="width:250px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #37288a;">
                                <i class="ri-circle-fill"></i>
                                <p><b>CONTENT</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Research, write, and create compelling articles, blogs, and resources that spread cybersecurity awareness.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem6" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\EM.png"
                            alt="" style="width:250px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #3e0699;">
                                <i class="ri-circle-fill"></i>
                                <p><b>EVENT MANAGEMENT</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Plan, coordinate, and execute engaging cybersecurity events, from CTFs to workshops, making each one unforgettable.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Complete duplicate set for seamless looping -->
                    <div id="elem1" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\Tech.png"
                            alt="" style="width:280px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #013066;">
                                <i class="ri-circle-fill"></i>
                                <p><b>TECHNICAL</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #06b1bd;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Dive into cybersecurity challenges, build tools, and sharpen your hacking skills while working on real-world security projects.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem2" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\Design.png"
                            alt="" style="width:420px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #0484ac;">
                                <i class="ri-circle-fill"></i>
                                <p><b>DESIGN</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #06b1bd;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Transform ideas into impactful visuals logos, posters, and graphics that define our brand identity</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem3" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\dEV.png"
                            alt="" style="width:250px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #040277;">
                                <i class="ri-circle-fill"></i>
                                <p><b>DEV</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Craft and maintain sleek, secure, and functional web experiences for Cyscom’s events and platforms.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem4" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\SM.png"
                            alt="" style="width:320px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #2c4cb8;">
                                <i class="ri-circle-fill"></i>
                                <p><b>SOCIAL MEDIA</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Shape Cyscom’s online presence with creative posts, trending content, and engaging campaigns</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem5" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\Content.png"
                            alt="" style="width:250px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #37288a;">
                                <i class="ri-circle-fill"></i>
                                <p><b>CONTENT</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Research, write, and create compelling articles, blogs, and resources that spread cybersecurity awareness.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="elem6" class="elem">
                        <img data-scroll data-scroll-speed="1"
                            src="Images\EM.png"
                            alt="" style="width:250px; height:auto;">
                        <div data-scroll data-scroll-speed="-2" class="dets">
                            <div class="dets-info" style="background-color: #3e0699;">
                                <i class="ri-circle-fill"></i>
                                <p><b>EVENT MANAGEMENT</b></p>
                                <i class="ri-arrow-right-s-line"></i>
                            </div>
                            <div class="container" style="background-color: #0484ac;">
                                <div class="listing">
                                    <div class="list-elem">
                                        <p>Plan, coordinate, and execute engaging cybersecurity events, from CTFs to workshops, making each one unforgettable.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="moto">
            <h2>THE BEST CYBERSECUIRTY CLUB IN VIT CHENNAI.</h2>
            <div class="para">
                <p>The Cybersecurity Student Community (CYSCOM) was formed in 2022 and ever since it has had one aim only, spreading awareness about cyber security and malware as well as ransomware threats in society and circles of students and teaching them how to deploy counter measures through various events and undertakings</p>
            </div>
        </div>
        <div id="page3">
            <div class="child" id="child1" data-color="#D4D0D3">
                <img src="Images/Eve1.png"
                    alt="">
                <div class="childInfo">
                    <p>Hack Overflow</p>
                    <p>2022</p>
                </div>
            </div>
            <div class="child" id="child2" data-color="#E6DFD7">
                <img src="Images/Eve2.png"
                    alt="">
                <div class="childInfo">
                    <p>Code & Conquer</p>
                    <p>2024</p>
                </div>
            </div>
            <div class="child" id="child3" data-color="#E6DFD7">
                <img src="Images/Eve3.png"
                    alt="">
                <div class="childInfo">
                    <p>V-Medithon</p>
                    <p>2024</p>
                </div>
            </div>
            <div class="child" id="child4" data-color="#B4D5B6">
                <img src="Images/Eve4.png"
                    alt="">
                <div class="childInfo">
                    <p>Zypher CTF</p>
                    <p>2023</p>
                </div>
            </div>
        </div>
        <div id="page4">
            <!-- Authentication Overlay -->
            <div id="auth-overlay" style="display: none;">
                <div class="auth-container">
                    <div class="auth-card">
                        <div class="auth-header">
                            <i class="ri-shield-check-line"></i>
                            <h2>Sign In Required</h2>
                            <p>Please sign in with your Google account to access the application form</p>
                        </div>
                        
                        <div class="auth-content">
                            <button id="google-sign-in-btn" class="google-auth-btn">
                                <i class="ri-google-line"></i>
                                <span>Continue with Google</span>
                            </button>
                            
                            <div class="auth-info">
                                <p><i class="ri-information-line"></i> We use Google Sign-In to verify your identity and prevent spam applications.</p>
                                <p><i class="ri-lock-line"></i> Your information is secure and will only be used for the application process.</p>
                            </div>
                        </div>
                        
                        <button id="close-auth-overlay" class="close-auth-btn">
                            <i class="ri-close-line"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- User Info Bar (shown when authenticated) -->
            <div id="user-info-bar" style="display: none;">
                <div class="user-info-content">
                    <div class="user-details">
                        <img id="user-avatar" class="user-avatar-img" src="" alt="User Avatar">
                        <span>Signed in as <strong id="user-name"></strong></span>
                    </div>
                    <button id="sign-out-btn" class="sign-out-button">
                        <i class="ri-logout-box-line"></i>
                        Sign Out
                    </button>
                </div>
            </div>

            <div id="recruitment-section">
                <div id="recruitment-header">
                    <h2>JOIN CYSCOM</h2>
                    <h3>Apply to Become Part of Our Cybersecurity Community</h3>
                    <p>Choose your department and submit your application to join CYSCOM's mission of spreading cybersecurity awareness.</p>
                </div>
                
                <!-- Recruitment Form -->
                <div id="recruitment-form-container">
                    <form id="recruitment-form" method="post" action="#" onsubmit="return false;" novalidate>
                        <!-- Personal Information Section -->
                        <div class="form-section">
                            <!-- <h4>Personal Information</h4> -->
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">First Name <span class="required">*</span></label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last Name <span class="required">*</span></label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Email Address <span class="required">*</span></label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number <span class="required">*</span></label>
                                    <input type="tel" id="phone" name="phone" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="regNumber">Registration Number <span class="required">*</span></label>
                                    <input type="text" id="regNumber" name="regNumber" required>
                                </div>
                                <div class="form-group">
                                    <label for="year">Academic Year <span class="required">*</span></label>
                                    <select id="year" name="year" required>
                                        <option value="" style="color:black">Select Year</option>
                                        <option value="1st" style="color:black">1st Year</option>
                                        <option value="2nd" style="color:black">2nd Year</option>
                                        <option value="3rd" style="color:black">3rd Year</option>
                                        <option value="4th" style="color:black">4th Year</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Honeypot field for bot protection (hidden) -->
                        <div style="position: absolute; left: -9999px; visibility: hidden;">
                            <input type="text" name="website" tabindex="-1" autocomplete="off" />
                        </div>

                        <!-- Department Selection -->
                        <div class="form-section">
                            <h4>Choose Your Departments <span class="required">*</span></h4>
                            <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">Select your 1st and 2nd preference departments. </p>
                            <div id="animated-department-selector"></div>
                            <!-- Hidden inputs to store selected departments -->
                            <input type="hidden" id="department-primary" name="departmentPrimary" required>
                            <input type="hidden" id="department-secondary" name="departmentSecondary" required>
                        </div>

                        <!-- Skills and Experience -->
                        <div class="form-section">
                            <!-- <h4>Skills & Experience</h4> -->
                            <div class="form-group">
                                <label for="skills">What skills or experience do you bring that would make you a strong asset to your chosen departments? <span class="required">*</span></label>
                                <textarea id="skills" name="skills" placeholder="List your relevant skills, technologies, tools, or experience..." required></textarea>
                            </div>
                        </div>

                        <!-- Motivation -->
                        <div class="form-section">
                            <h4>Tell Us About Yourself</h4>
                            <div class="form-group">
                                <label for="motivation">Why do you want to join CYSCOM? <span class="required">*</span></label>
                                <textarea id="motivation" name="motivation" placeholder="Tell us why you're interested in cybersecurity and what motivates you to join CYSCOM..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="contribution">Explain “cybersecurity” to your non-tech friend without using the words “hacking” or “internet. ”<span class="required">*</span></label>
                                <textarea id="contribution" name="contribution" placeholder="Show your creativity..." required></textarea>
                            </div>
                        </div>


                        <div class="form-actions">
                            <button type="submit" id="submit-btn" class="submit-button">
                                <span class="btn-text">Submit Application</span>
                                <span class="loading-spinner" style="display: none;">
                                    <i class="ri-loader-4-line"></i>
                                </span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Success/Error Messages -->
                <div id="form-messages" style="display: none;">
                    <div id="success-message" class="message success-msg" style="display: none;">
                        <h4>Application Submitted Successfully!</h4>
                        <p>Thank you for your interest in CYSCOM. We'll review your application and get back to you soon.</p>
                    </div>
                    
                    <div id="error-message" class="message error-msg" style="display: none;">
                        <h4>Submission Failed</h4>
                        <p>There was an error submitting your application. Please try again.</p>
                    </div>
                </div>
            </div>
            <hr>
        </div>
        <div id="page5">
            <div id="footer">
                <div id="connect">
                    <p>CONNECT WITH US</p>
                    <a href="https://www.instagram.com/cyscomvit" title="Follow us on Instagram">
                        <i class="ri-instagram-line"></i>
                    </a>
                    <a href="https://x.com/CyscomVit" title="Follow us on X (Twitter)">
                        <i class="ri-twitter-x-line"></i>
                    </a>
                    <a href="https://www.linkedin.com/company/cyscomvit/" title="Connect with us on LinkedIn">
                        <i class="ri-linkedin-line"></i>
                    </a>
                </div>
                <div id="logo">
                    <img src="./logo.png" alt="">
                    <div id="copyright">
                        <a href="https://cyscomvit.com/">&copy; CYSCOM</a>
                        <a href="https://www.aicte.gov.in/">RECOGNIZED BY AICTE, Govt. Of INDIA</a>
                        <a href="https://chennai.vit.ac.in/">VIT CHENNAI</a>
                    </div>
                </div>
                <div id="nitty">
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"
        integrity="sha512-16esztaSRplJROstbIIdwX3N97V1+pZvV33ABoG1H2OyTttBxEGkTsoIVsiP1iaTtM8b3+hu2kB6pQ4Clr5yug=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"
        integrity="sha512-Ic9xkERjyZ1xgJ5svx3y0u3xrvfT/uPkV99LBwe68xjy/mGtO+4eURHZBW2xW4SZbFrF1Tf090XqB+EVgXnVjw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="app.js"></script>
    <script type="text/babel" src="react-components.js"></script>
    <script type="text/babel" src="react-enhanced.js"></script>
    <script type="text/babel" src="animated-department-selector.js"></script>
    <script src="glitch-text-component.js"></script>
    <script type="text/babel" src="SimpleParticles.js"></script>
    <script>

        // Start trying to initialize particles as soon as DOM is ready
        let particlesInitialized = false;
        
        function initializeParticlesBackground() {
            if (particlesInitialized) return;
            
            const particlesContainer = document.getElementById('particles-background');
            

            if (!particlesContainer) {

                setTimeout(initializeParticlesBackground, 100);
                return;
            }
            
            if (!window.React || !window.ReactDOM) {

                setTimeout(initializeParticlesBackground, 100);
                return;
            }
            
            if (!window.Particles) {

                setTimeout(initializeParticlesBackground, 100);
                return;
            }

            try {
                // Create React element using createElement
                const particlesElement = React.createElement(window.Particles, {
                    particleCount: 50, 
                    speed: 0.4, 
                    particleColors: ['#ffffff', '#e0e6ff', '#b8c5ff', '#d4d9ff', '#00BFFF'],
                    size: 3,
                    className: 'page1-particles'
                });

                // Render to the particles container
                ReactDOM.render(particlesElement, particlesContainer);
                particlesInitialized = true;
                
            } catch (error) {
                console.error('Error initializing particles:', error);
                showParticlesFallback(particlesContainer);
            }
        }
        
        // Enhanced fallback with immediate animation
        function showParticlesFallback(container) {
            container.style.background = `
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(224,230,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 80%, rgba(184,197,255,0.08) 0%, transparent 50%),
                radial-gradient(circle at 30% 70%, rgba(212,217,255,0.12) 0%, transparent 50%)
            `;
            container.style.animation = 'particlesFallback 6s ease-in-out infinite alternate';
        }
        
        // Multiple initialization attempts for fastest possible loading
        document.addEventListener('DOMContentLoaded', function() {
            initializeParticlesBackground();
        });
        
        // Force page to top on refresh/load
        window.addEventListener('beforeunload', function() {
            window.scrollTo(0, 0);
        });
        
        // Also ensure we're at top when page loads and retry particles if needed
        window.addEventListener('load', function() {
            setTimeout(function() {
                window.scrollTo(0, 0);
            }, 100);
            
            // Final attempt after full page load
            if (!particlesInitialized) {
                initializeParticlesBackground();
            }
        });
        
        // AGGRESSIVE RETRY: Try particles initialization every 200ms until successful
        const maxRetries = 25; // 5 seconds maximum
        let retryCount = 0;
        
        const aggressiveRetry = setInterval(() => {
            if (particlesInitialized || retryCount >= maxRetries) {
                clearInterval(aggressiveRetry);
                if (retryCount >= maxRetries) {
                    const container = document.getElementById('particles-background');
                    if (container) showParticlesFallback(container);
                }
                return;
            }
            retryCount++;
            initializeParticlesBackground();
        }, 200);

        // Initialize Particles Background Function
        function initializeParticlesBackground() {
            const particlesContainer = document.getElementById('particles-background');
            
            // Check if all required dependencies are loaded
            if (!particlesContainer) {
                return;
            }
            
            if (!window.React || !window.ReactDOM) {
                setTimeout(initializeParticlesBackground, 500);
                return;
            }
            
            if (!window.Particles) {
                setTimeout(initializeParticlesBackground, 500);
                return;
            }

            try {
                // Create React element using createElement
                const particlesElement = React.createElement(window.Particles, {
                    particleCount: 80,
                    speed: 0.3,
                    particleColors: ['#ffffff', '#e0e6ff', '#b8c5ff', '#d4d9ff', '#00BFFF'],
                    size: 3,
                    className: 'page1-particles'
                });

                // Render to the particles container
                ReactDOM.render(particlesElement, particlesContainer);
                
            } catch (error) {
                console.error('Error initializing particles:', error);
                // Fallback: show a simple animated overlay
                particlesContainer.style.background = 'radial-gradient(circle at 30% 20%, rgba(255,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 70% 80%, rgba(255,255,255,0.05) 0%, transparent 50%)';
                particlesContainer.style.animation = 'pulse 4s ease-in-out infinite alternate';
            }
        }

        // Smooth scrolling for navigation links
        document.addEventListener('DOMContentLoaded', function() {
            // Force scroll to top immediately
            window.scrollTo(0, 0);
            
            // Initialize automatic glitch effect cycle for childInfo p tags
            function startGlitchCycle() {
                const children = [
                    { selector: '#child1 .childInfo p', delay: 0 },      // Start immediately
                    { selector: '#child2 .childInfo p', delay: 2000 },   // Start after 2 seconds
                    { selector: '#child3 .childInfo p', delay: 4000 },   // Start after 4 seconds
                    { selector: '#child4 .childInfo p', delay: 6000 }    // Start after 6 seconds
                ];
                
                children.forEach(child => {
                    setTimeout(() => {
                        const elements = document.querySelectorAll(child.selector);
                        
                        function glitchCycle() {
                            elements.forEach(el => el.classList.add('glitch-active'));
                            
                            // Remove glitch after 1 second
                            setTimeout(() => {
                                elements.forEach(el => el.classList.remove('glitch-active'));
                            }, 1000);
                        }
                        
                        // Start the glitch immediately
                        glitchCycle();
                        
                        // Repeat every 8 seconds (8s total cycle time)
                        setInterval(glitchCycle, 8000);
                        
                    }, child.delay);
                });
            }
            
            // Start the glitch cycle after a short delay to ensure DOM is ready
            setTimeout(startGlitchCycle, 500);
            
            // Get all navigation links
            const homeLink = document.getElementById('home-link');
            const aboutLink = document.getElementById('about-link');
            const registerLink = document.getElementById('register-link');
            const recruitmentLink = document.getElementById('recruitment-link');
            const resultsLink = document.getElementById('results-link');

            // Add smooth scroll behavior
            function smoothScrollTo(targetId) {
                const target = document.getElementById(targetId);
                if (target) {
                    // Check if it's a mobile device
                    if (/Mobi|Android/i.test(navigator.userAgent)) {
                        // On mobile, use native smooth scrolling
                        const offset = target.offsetTop;
                        window.scrollTo({
                            top: offset,
                            behavior: 'smooth'
                        });
                        // Close mobile menu if it's open
                        const menu = document.querySelector('.nav-links');
                        if (menu && menu.classList.contains('active')) {
                            menu.classList.remove('active');
                        }
                    } else if (window.locoScroll) {
                        // On desktop, use Locomotive Scroll
                        window.locoScroll.scrollTo(target);
                    } else {
                        // Fallback
                        target.scrollIntoView({
                            behavior: 'smooth',
                            inline: 'nearest'
                        });
                    }
                }
            }

            // Multiple methods for scrolling to top (for better compatibility)
            function scrollToTop() {
                // Method 1: window.scrollTo
                window.scrollTo({
                    top: 0,
                    left: 0,
                    behavior: 'smooth'
                });
                
                // Method 2: Fallback for older browsers
                document.body.scrollTop = 0;
                document.documentElement.scrollTop = 0;
            }

            // Add event listeners with null checks
            if (homeLink) {
                homeLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    scrollToTop();
                });
            }

            if (aboutLink) {
                aboutLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    smoothScrollTo('moto');
                });
            }

            if (registerLink) {
                registerLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    smoothScrollTo('page2');
                });
            }

            if (recruitmentLink) {
                recruitmentLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    smoothScrollTo('page4');
                });
            }

            if (resultsLink) {
                resultsLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    smoothScrollTo('impact');
                });
            }

            // Navbar scroll behavior - integrated with Locomotive Scroll
            let lastScrollTop = 0;
            let scrollDirection = 'up';
            const nav = document.getElementById('nav');
            
            // Initialize nav as visible
            if (nav) {
                nav.classList.add('nav-visible');
            }

            // Wait for Locomotive Scroll to be initialized, then hook into it
            setTimeout(() => {
                if (window.locoScroll) {
                    // Hook into locomotive scroll events
                    window.locoScroll.on('scroll', (obj) => {
                        const currentScroll = obj.scroll.y;
                        
                        // Determine scroll direction
                        if (currentScroll > lastScrollTop && currentScroll > 50) {
                            // Scrolling down and past 50px threshold
                            scrollDirection = 'down';
                            if (nav) {
                                nav.classList.add('nav-hidden');
                                nav.classList.remove('nav-visible');
                            }
                        } else if (currentScroll < lastScrollTop) {
                            // Scrolling up - always show navbar
                            scrollDirection = 'up';
                            if (nav) {
                                nav.classList.add('nav-visible');
                                nav.classList.remove('nav-hidden');
                            }
                        }
                        
                        // Always show nav at the very top
                        if (currentScroll <= 20) {
                            if (nav) {
                                nav.classList.add('nav-visible');
                                nav.classList.remove('nav-hidden');
                            }
                        }
                        
                        lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
                    });
                } else {
                    // Fallback to regular scroll if locomotive scroll is not available
                    console.warn('Locomotive Scroll not found, using fallback scroll behavior');
                    window.addEventListener('scroll', function() {
                        const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                        
                        if (currentScroll > lastScrollTop && currentScroll > 50) {
                            scrollDirection = 'down';
                            if (nav) {
                                nav.classList.add('nav-hidden');
                                nav.classList.remove('nav-visible');
                            }
                        } else if (currentScroll < lastScrollTop) {
                            scrollDirection = 'up';
                            if (nav) {
                                nav.classList.add('nav-visible');
                                nav.classList.remove('nav-hidden');
                            }
                        }
                        
                        if (currentScroll <= 20) {
                            if (nav) {
                                nav.classList.add('nav-visible');
                                nav.classList.remove('nav-hidden');
                            }
                        }
                        
                        lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
                    });
                }
            }, 1000); // Wait 1 second for locomotive scroll to initialize

            // Continuous Auto-Scrolling Infinite Slider
            const slider = document.getElementById('slider-wrapper');
            const slides = document.querySelectorAll('#page2 .elem');
            
            const slideWidth = 440; // 400px width + 40px margins
            const originalSlides = 6; // Number of original slides
            const totalSlides = slides.length; // Total including duplicates
            const scrollSpeed = 1.5; // Pixels per frame (adjust for speed)
            let currentPosition = 0;
            let animationId;
            let isPaused = false;


            // Continuous scrolling animation with perfect seamless loop
            function continuousScroll() {
                if (isPaused) {
                    animationId = requestAnimationFrame(continuousScroll);
                    return;
                }

                // Move position continuously
                currentPosition += scrollSpeed;
                
                // Apply transform
                slider.style.transform = `translateX(-${currentPosition}px)`;
                
                // Calculate when to reset to avoid any visible gap
                // Reset when we've scrolled exactly the width of original slides
                const resetThreshold = originalSlides * slideWidth;
                
                // Check if we need to reset (with a small buffer to prevent visual glitches)
                if (currentPosition >= resetThreshold - scrollSpeed) {
                    // Instant reset to create seamless loop
                    currentPosition = 0;
                    // Don't log every reset to avoid console spam
                    
                }
                
                // Continue animation
                animationId = requestAnimationFrame(continuousScroll);
            }

            // Start continuous scrolling
            function startContinuousScroll() {
                if (!animationId) {
                    
                    continuousScroll();
                }
            }

            // Stop continuous scrolling
            function stopContinuousScroll() {
                if (animationId) {
                    
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            }

            // Pause scrolling
            function pauseScroll() {
                
                isPaused = true;
            }

            // Resume scrolling
            function resumeScroll() {
                
                isPaused = false;
            }

            // Initialize slider with proper positioning
            function initializeSlider() {
                
                
                // Ensure no transition interferes
                slider.style.transition = 'none';
                
                // Start from the beginning
                currentPosition = 0;
                
                // Dynamically set the slider wrapper width
                const calculatedWidth = totalSlides * slideWidth;
                slider.style.width = `${calculatedWidth}px`;
                
                // Position the slider at the start
                slider.style.transform = `translateX(0px)`;
                
                
                
                // Verify we have enough duplicates by checking slide content
                const allSlides = slider.querySelectorAll('.elem');
                
                
                // Start continuous scrolling
                isPaused = false;
                startContinuousScroll();
            }

            // Pause on hover
            const sliderContainer = document.getElementById('slider-container');
            if (sliderContainer) {
                sliderContainer.addEventListener('mouseenter', pauseScroll);
                sliderContainer.addEventListener('mouseleave', resumeScroll);
            }

            // Pause on touch for mobile
            slider.addEventListener('touchstart', pauseScroll, { passive: true });
            slider.addEventListener('touchend', () => {
                setTimeout(resumeScroll, 1000); // Resume after 1 second
            }, { passive: true });

            // Handle page visibility (pause when tab is not active)
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    pauseScroll();
                } else {
                    resumeScroll();
                }
            });

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeSlider);
            } else {
                // Add a small delay to ensure all elements are rendered
                setTimeout(initializeSlider, 100);
            }

            // --- Glitch: make image/parent hover also trigger text glitch ---
            // This adds support for mouse hover and a JS touch fallback that toggles
            // a `.hovered` class on `.child` so the CSS rules can trigger the
            // `.glitch` pseudo-elements when the parent is hovered or tapped.
            (function setupChildHoverFallback() {
                const children = document.querySelectorAll('#page3 .child');
                if (!children || children.length === 0) return;

                children.forEach(child => {
                    // Mouse support: add/remove hovered class on enter/leave
                    child.addEventListener('mouseenter', () => child.classList.add('hovered'));
                    child.addEventListener('mouseleave', () => child.classList.remove('hovered'));

                    // Touch support: toggle on touchstart, remove on touchend or after a timeout
                    let touchTimer = null;
                    child.addEventListener('touchstart', (e) => {
                        // Prevent interfering with scroll - only proceed for short taps
                        child.classList.add('hovered');
                        if (touchTimer) clearTimeout(touchTimer);
                        touchTimer = setTimeout(() => {
                            child.classList.remove('hovered');
                            touchTimer = null;
                        }, 1200); // keep hovered for 1.2s
                    }, { passive: true });

                    child.addEventListener('touchend', () => {
                        if (touchTimer) {
                            clearTimeout(touchTimer);
                            touchTimer = null;
                        }
                        // remove hovered shortly after touchend to allow the effect to play
                        setTimeout(() => child.classList.remove('hovered'), 300);
                    }, { passive: true });
                });
            })();

            // Firebase Authentication for Form Access
            let currentUser = null;
            let isAuthChecking = true;

            // Initialize authentication when Firebase is loaded
            window.addEventListener('firebaseLoaded', initializeAuth);

            function initializeAuth() {
                
                
                // Check authentication state - persist sessions across refreshes
                window.firebase.onAuthStateChanged(window.firebase.auth, (user) => {
                    console.log('Auth state changed:', {
                        user: !!user,
                        email: user?.email,
                        userAgent: navigator.userAgent.includes('Mobile') ? 'Mobile' : 'Desktop'
                    });
                    
                    currentUser = user;
                    isAuthChecking = false;
                    updateFormAccess(user);
                    
                    // Ensure mobile devices have proper auth state
                    if (user && navigator.userAgent.includes('Mobile')) {
                        setTimeout(() => {
                            if (!currentUser) {
                                console.log('Mobile auth recovery: Re-setting currentUser');
                                currentUser = window.firebase.auth.currentUser;
                            }
                        }, 1000);
                    }
                });

                // Setup auth event listeners
                setupAuthEventListeners();
                
                // Add a helper function for mobile compatibility
                window.getCurrentAuthUser = function() {
                    return currentUser || window.firebase.auth.currentUser;
                };
                
                // Mobile-specific auth state monitoring
                if (navigator.userAgent.includes('Mobile')) {
                    setInterval(() => {
                        const firebaseUser = window.firebase.auth.currentUser;
                        if (firebaseUser && !currentUser) {
                            console.log('Mobile auth recovery: Restoring currentUser from Firebase');
                            currentUser = firebaseUser;
                            updateFormAccess(firebaseUser);
                        }
                    }, 5000); // Check every 5 seconds
                }
            }

            function updateFormAccess(user) {
                const authOverlay = document.getElementById('auth-overlay');
                const userInfoBar = document.getElementById('user-info-bar');
                const recruitmentFormContainer = document.getElementById('recruitment-form-container');
                const formMessages = document.getElementById('form-messages');

                if (user) {
                    // User is signed in - show form, hide overlay and user info bar
                    
                    authOverlay.style.display = 'none';
                    userInfoBar.style.display = 'none'; // Hide user info bar for main page
                    
                    // Remove form restriction notice first
                    removeFormRestrictionNotice();
                    
                    // Remove the restricted class to show the form
                    recruitmentFormContainer.classList.remove('form-restricted');
                    
                    // Add a smooth appearance animation
                    recruitmentFormContainer.style.opacity = '0';
                    recruitmentFormContainer.style.transform = 'translateY(20px)';
                    recruitmentFormContainer.style.display = 'block';
                    
                    // Animate the form appearance
                    setTimeout(() => {
                        recruitmentFormContainer.style.transition = 'all 0.5s ease';
                        recruitmentFormContainer.style.opacity = '1';
                        recruitmentFormContainer.style.transform = 'translateY(0)';
                         if (window.updatePageScroll) {
                            setTimeout(window.updatePageScroll, 300);
                        }
                    }, 100);
                    
                    // Auto-fill and make email field immutable
                    const emailInput = document.getElementById('email');
                    if (emailInput) {
                        emailInput.value = user.email;
                        emailInput.readOnly = true;
                        emailInput.style.backgroundColor = '#f8f9fa';
                        emailInput.style.cursor = 'not-allowed';
                        emailInput.style.opacity = '0.8';
                        // Add a visual indicator that it's the authenticated email
                        emailInput.title = 'Email from authenticated Google account (read-only)';
                    }
                    
                    // Add or update user info section with sign-out button
                    addUserInfoSection(user);
                } else {
                    // User is not signed in - hide form, show restriction notice
                    
                    userInfoBar.style.display = 'none';
                    recruitmentFormContainer.classList.add('form-restricted');
                    
                    // Clear the current user document ID
                    window.currentUserDocId = null;
                    
                    // Remove user info section if it exists
                    removeUserInfoSection();
                    
                    // Reset submit button text
                    const submitBtn = document.querySelector('button[type="submit"]');
                    if (submitBtn) {
                        const btnText = submitBtn.querySelector('.btn-text');
                        if (btnText) {
                            btnText.textContent = 'Submit Application';
                        }
                    }
                    
                    // Reset email field to editable
                    const emailInput = document.getElementById('email');
                    if (emailInput) {
                        emailInput.value = '';
                        emailInput.readOnly = false;
                        emailInput.style.backgroundColor = '';
                        emailInput.style.cursor = '';
                        emailInput.style.opacity = '';
                        emailInput.title = '';
                    }
                    
                    // Clear the form data when user signs out
                    resetFormData();
                    
                    // Add restriction notice if not already present
                    addFormRestrictionNotice();
                    if (window.updatePageScroll) {
                        setTimeout(window.updatePageScroll, 300);
                    }
                }
            }

            function resetFormData() {
                // Reset the recruitment form if it exists
                const recruitmentForm = document.getElementById('recruitment-form');
                if (recruitmentForm) {
                    recruitmentForm.reset();
                }
                
                // Reset department selections
                window.dispatchEvent(new CustomEvent('resetDepartmentSelector'));
                
                // Clear hidden department fields
                const primaryInput = document.getElementById('department-primary');
                const secondaryInput = document.getElementById('department-secondary');
                if (primaryInput) primaryInput.value = '';
                if (secondaryInput) secondaryInput.value = '';
            }

            function removeFormRestrictionNotice() {
                const existingNotice = document.getElementById('form-restriction-notice');
                if (existingNotice) {
                    existingNotice.remove();
                }
            }

            function addFormRestrictionNotice() {
                const recruitmentSection = document.getElementById('recruitment-section');
                let existingNotice = document.getElementById('form-restriction-notice');
                
                if (!existingNotice) {
                    const notice = document.createElement('div');
                    notice.id = 'form-restriction-notice';
                    notice.className = 'form-restriction-notice';
                    notice.innerHTML = `
                        <h3></h3>
                        <p>Please sign in with your VIT Student Google account (@vitstudent.ac.in) to access the application form</p>
                        <button id="direct-google-sign-in-btn" class="direct-google-auth-btn" style="
                            background: rgba(255,255,255,0.4);
                            color: white;
                            border: 1px solid rgba(255,255,255,0.3);
                            padding: 10px 20px;
                            border-radius: 8px;
                            cursor: pointer;
                            margin-top: 1rem;
                            display: inline-flex;
                            align-items: center;
                            gap: 8px;
                        ">
                            <i class="ri-google-line"></i>
                            <span>Continue with Google</span>
                        </button>
                    `;
                    
                    const formContainer = document.getElementById('recruitment-form-container');
                    recruitmentSection.insertBefore(notice, formContainer);
                    
                    // Setup event listener for the direct Google sign-in button
                    const directSignInBtn = document.getElementById('direct-google-sign-in-btn');
                    if (directSignInBtn) {
                        directSignInBtn.addEventListener('click', signInWithGoogle);
                    }
                }
            }

            function setupAuthEventListeners() {
                // Google Sign In button
                const googleSignInBtn = document.getElementById('google-sign-in-btn');
                if (googleSignInBtn) {
                    googleSignInBtn.addEventListener('click', signInWithGoogle);
                }

                // Sign Out buttons (handle multiple)
                const signOutBtns = document.querySelectorAll('.sign-out-btn, .sign-out-button, #sign-out-btn');
                signOutBtns.forEach(btn => {
                    if (btn) {
                        btn.addEventListener('click', signOutUser);
                    }
                });

                // Close auth overlay
                const closeAuthBtn = document.getElementById('close-auth-overlay');
                if (closeAuthBtn) {
                    closeAuthBtn.addEventListener('click', hideAuthOverlay);
                }

                // Close overlay when clicking outside
                const authOverlay = document.getElementById('auth-overlay');
                if (authOverlay) {
                    authOverlay.addEventListener('click', (e) => {
                        if (e.target === authOverlay) {
                            hideAuthOverlay();
                        }
                    });
                }

                // Intercept form interactions (with mobile auth compatibility)
                const recruitmentFormContainer = document.getElementById('recruitment-form-container');
                if (recruitmentFormContainer) {
                    recruitmentFormContainer.addEventListener('click', (e) => {
                        const authUser = currentUser || window.firebase?.auth?.currentUser;
                        if (!authUser && !isAuthChecking) {
                            e.preventDefault();
                            e.stopPropagation();
                            showAuthOverlay();
                        }
                    });
                    
                    recruitmentFormContainer.addEventListener('focusin', (e) => {
                        const authUser = currentUser || window.firebase?.auth?.currentUser;
                        if (!authUser && !isAuthChecking) {
                            e.preventDefault();
                            e.target.blur();
                            showAuthOverlay();
                        }
                    });
                }
            }

            async function signInWithGoogle() {
                try {
                    
                    const provider = new window.firebase.GoogleAuthProvider();
                    provider.setCustomParameters({
                        prompt: 'select_account'
                    });
                    
                    const result = await window.firebase.signInWithPopup(window.firebase.auth, provider);
                    const userEmail = result.user.email;
                    
                    
                    // Generate and log the document ID that will be used
                    const expectedDocId = hashEmail(userEmail);
                    
                    
                    // Check if email domain is allowed
                    if (!userEmail.endsWith('@vitstudent.ac.in')) {
                        console.warn('Unauthorized domain:', userEmail);
                        await window.firebase.signOut(window.firebase.auth);
                        showTemporaryMessage('Only VIT Student emails (@vitstudent.ac.in) are allowed to access this form.', 'error');
                        return;
                    }
                    
                    // Check for existing submission
                    await checkExistingSubmission(userEmail);
                    
                    // Show success message temporarily
                    showTemporaryMessage('Successfully signed in!', 'success');
                    
                } catch (error) {
                    console.error('Sign in error:', error);
                    let errorMessage = 'Sign in failed. Please try again.';
                    
                    if (error.code === 'auth/popup-closed-by-user') {
                        errorMessage = 'Sign in was cancelled. Please try again.';
                    } else if (error.code === 'auth/popup-blocked') {
                        errorMessage = 'Popup was blocked. Please allow popups and try again.';
                    }
                    
                    showTemporaryMessage(errorMessage, 'error');
                }
            }

            // Simple hash function to create consistent document IDs from email
            function hashEmail(email) {
                let hash = 0;
                if (email.length === 0) return hash.toString();
                for (let i = 0; i < email.length; i++) {
                    const char = email.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32-bit integer
                }
                // Make it positive and add prefix for better document ID
                return 'user_' + Math.abs(hash).toString();
            }

            async function checkExistingSubmission(userEmail) {
                try {
                    
                    
                    // Generate consistent document ID from email hash
                    const docId = hashEmail(userEmail);
                    
                    
                    // Store the document ID for later use
                    window.currentUserDocId = docId;
                    
                    // Try to get the document directly by ID
                    const docRef = window.firebase.doc(window.firebase.db, 'applications', docId);
                    const docSnapshot = await window.firebase.getDoc(docRef);
                    
                    if (docSnapshot.exists()) {
                        // User has existing submission - load it for editing
                        const existingData = docSnapshot.data();
                        
                        
                        
                        // Populate form with existing data
                        populateFormWithExistingData(existingData);
                        
                        // Show edit message
                        showTemporaryMessage('Welcome back! Your previous submission has been loaded for editing.', 'info');
                        
                        // Change submit button text
                        const submitBtn = document.querySelector('button[type="submit"]');
                        if (submitBtn) {
                            const btnText = submitBtn.querySelector('.btn-text');
                            if (btnText) {
                                btnText.textContent = 'Update Application';
                            }
                        }
                    } else {
                        // New user - no existing submission
                        
                    }
                    
                } catch (error) {
                    console.error('Error checking existing submission:', error);
                    // Don't block sign-in if checking fails
                }
            }

            function populateFormWithExistingData(data) {
                try {
                    // Populate text inputs
                    const textFields = ['firstName', 'lastName', 'registrationNumber', 'phoneNumber', 'cgpa', 'yearOfStudy'];
                    textFields.forEach(field => {
                        const input = document.getElementById(field);
                        if (input && data[field]) {
                            input.value = data[field];
                        }
                    });
                    
                    // Populate textarea fields
                    const textareaFields = ['whyJoinUs', 'prevExperience', 'expectations', 'additionalInfo'];
                    textareaFields.forEach(field => {
                        const textarea = document.getElementById(field);
                        if (textarea && data[field]) {
                            textarea.value = data[field];
                        }
                    });
                    
                    // Populate department selections
                    if (data.departmentPrimary) {
                        const primaryInput = document.getElementById('department-primary');
                        if (primaryInput) {
                            primaryInput.value = data.departmentPrimary;
                        }
                        // Update department selector display if needed
                        updateDepartmentDisplay(data.departmentPrimary, 'primary');
                    }
                    
                    if (data.departmentSecondary) {
                        const secondaryInput = document.getElementById('department-secondary');
                        if (secondaryInput) {
                            secondaryInput.value = data.departmentSecondary;
                        }
                        // Update department selector display if needed
                        updateDepartmentDisplay(data.departmentSecondary, 'secondary');
                    }
                    
                    
                    
                } catch (error) {
                    console.error('Error populating form with existing data:', error);
                }
            }

            function updateDepartmentDisplay(department, type) {
                // This function would update the department selector display
                // Since the department selector is a React component, we need to trigger updates through events
                
                
                // Dispatch a custom event that the React component can listen to
                window.dispatchEvent(new CustomEvent('updateDepartmentSelection', {
                    detail: { department, type }
                }));
                
                // Also update the hidden form fields directly as backup
                setTimeout(() => {
                    if (type === 'primary') {
                        const primaryInput = document.getElementById('department-primary');
                        if (primaryInput) primaryInput.value = department;
                    } else if (type === 'secondary') {
                        const secondaryInput = document.getElementById('department-secondary');
                        if (secondaryInput) secondaryInput.value = department;
                    }
                }, 100);
            }

            function addUserInfoSection(user) {
                const recruitmentSection = document.getElementById('recruitment-section');
                let existingUserInfo = document.getElementById('authenticated-user-info');
                
                if (!existingUserInfo) {
                    const userInfo = document.createElement('div');
                    userInfo.id = 'authenticated-user-info';
                    userInfo.className = 'authenticated-user-info';
                    userInfo.innerHTML = `
                        <div class="user-details">
                            <i class="ri-user-line"></i>
                            <span class="user-email">${user.email}</span>
                            <span class="auth-status">Verified</span>
                        </div>
                        <button id="user-info-sign-out-btn" class="sign-out-btn">
                            <i class="ri-logout-box-line"></i>
                            <span>Sign Out</span>
                        </button>
                    `;
                    
                    const formContainer = document.getElementById('recruitment-form-container');
                    recruitmentSection.insertBefore(userInfo, formContainer);
                    
                    // Setup event listener for sign-out button
                    const signOutBtn = document.getElementById('user-info-sign-out-btn');
                    if (signOutBtn) {
                        signOutBtn.addEventListener('click', signOutUser);
                    }
                } else {
                    // Update existing user info
                    const userEmail = existingUserInfo.querySelector('.user-email');
                    if (userEmail) {
                        userEmail.textContent = user.email;
                    }
                }
            }

            function removeUserInfoSection() {
                const existingUserInfo = document.getElementById('authenticated-user-info');
                if (existingUserInfo) {
                    existingUserInfo.remove();
                }
            }

            async function signOutUser() {
                try {
                    console.log('Signing out...');
                    
                    // Clear current user document ID
                    window.currentUserDocId = null;
                    
                    // Sign out from Firebase
                    await window.firebase.signOut(window.firebase.auth);
                    console.log('Sign out successful');
                    
                    // Clear form data for security
                    const form = document.getElementById('recruitment-form');
                    if (form) {
                        form.reset();
                        
                        // Clear department selections
                        const primaryInput = document.getElementById('department-primary');
                        const secondaryInput = document.getElementById('department-secondary');
                        if (primaryInput) primaryInput.value = '';
                        if (secondaryInput) secondaryInput.value = '';
                        
                        // Trigger reset event for React component
                        window.dispatchEvent(new CustomEvent('resetDepartmentSelector'));
                    }
                    
                    // Clear any stored authentication state
                    localStorage.removeItem('firebase-auth-user');
                    sessionStorage.removeItem('firebase-auth-user');
                    
                    showTemporaryMessage('Successfully signed out!', 'success');
                    
                } catch (error) {
                    console.error('Sign out error:', error);
                    showTemporaryMessage('Sign out failed. Please try again.', 'error');
                }
            }

            // Make auth functions globally accessible
            window.showAuthOverlay = function() {
                const authOverlay = document.getElementById('auth-overlay');
                if (authOverlay) {
                    // Scroll to top of page to ensure popup is visible
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // Show the overlay after a brief delay to allow scroll
                    setTimeout(() => {
                        authOverlay.style.display = 'flex';
                    }, 100);
                }
            }

            window.hideAuthOverlay = function() {
                const authOverlay = document.getElementById('auth-overlay');
                if (authOverlay) {
                    authOverlay.style.display = 'none';
                }
            }

            function showAuthOverlay() {
                window.showAuthOverlay();
            }

            function hideAuthOverlay() {
                window.hideAuthOverlay();
            }

            function showTemporaryMessage(message, type) {
                const messageDiv = document.createElement('div');
                let backgroundColor;
                let zIndex = 10001;

                switch(type) {
                    case 'success':
                        backgroundColor = '#28a745';
                        break;
                    case 'info':
                        backgroundColor = '#3498db';
                        zIndex = 20000; 
                        break;
                    case 'error':
                    default:
                        backgroundColor = '#dc3545';
                        break;
                }
                
                messageDiv.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 20px;
                    border-radius: 8px;
                    color: white;
                    font-weight: 500;
                    z-index: ${zIndex};
                    animation: slideInRight 0.3s ease;
                    background: ${backgroundColor};
                    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                `;
                messageDiv.textContent = message;
                
                document.body.appendChild(messageDiv);
                
                setTimeout(() => {
                    messageDiv.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        document.body.removeChild(messageDiv);
                    }, 300);
                }, 3000);
            }

            // Initialize auth when Firebase is ready
            if (window.firebaseLoaded) {
                initializeAuth();
            }

            // Recruitment Form Handling
            const recruitmentForm = document.getElementById('recruitment-form');
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.querySelector('.btn-text');
            const loadingSpinner = document.querySelector('.loading-spinner');
            const formMessages = document.getElementById('form-messages');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');

            // Form validation and security
            function sanitizeInput(str) {
                const div = document.createElement('div');
                div.textContent = str;
                return div.innerHTML;
            }

            function validateEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            function validatePhone(phone) {
                const phoneRegex = /^[+]?[\d\s()-]{10,15}$/;
                return phoneRegex.test(phone);
            }

            function validateRegNumber(regNumber) {
                // Basic validation for VIT registration number format
                const regRegex = /^[0-9]{2}[A-Z]{3}[0-9]{4}$/;
                return regRegex.test(regNumber.toUpperCase());
            }

            // Rate limiting
            let lastSubmissionTime = 0;
            const SUBMISSION_COOLDOWN = 30000; // 30 seconds

            // Department selection styling
            const departmentOptions = document.querySelectorAll('.department-option');
            departmentOptions.forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                radio.addEventListener('change', function() {
                    departmentOptions.forEach(opt => opt.classList.remove('selected'));
                    if (this.checked) {
                        option.classList.add('selected');
                    }
                });
            });

            // Form submission
            recruitmentForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                e.stopPropagation();

                // Double-check: Prevent any default form submission
                if (e.defaultPrevented === false) {
                    e.preventDefault();
                    return false;
                }

                // Enhanced authentication check for mobile compatibility
                let authUser = currentUser || window.firebase.auth.currentUser;
                
                // Additional mobile auth check - try to refresh auth state
                if (!authUser && navigator.userAgent.includes('Mobile')) {
                    console.log('Mobile device detected with no auth user. Attempting auth refresh...');
                    try {
                        await new Promise((resolve) => {
                            const unsubscribe = window.firebase.onAuthStateChanged(window.firebase.auth, (user) => {
                                authUser = user;
                                if (user) {
                                    currentUser = user;
                                }
                                unsubscribe();
                                resolve();
                            });
                        });
                    } catch (error) {
                        console.error('Auth refresh failed:', error);
                    }
                }
                
                // Debug logging for mobile issues
                console.log('Form submission auth check:', {
                    currentUser: !!currentUser,
                    firebaseAuthUser: !!window.firebase.auth.currentUser,
                    authUser: !!authUser,
                    authUserEmail: authUser?.email,
                    authUserUID: authUser?.uid,
                    authUserEmailVerified: authUser?.emailVerified,
                    userAgent: navigator.userAgent.includes('Mobile') ? 'Mobile' : 'Desktop'
                });
                
                // Get and log the auth token for debugging mobile issues
                try {
                    if (authUser) {
                        const token = await authUser.getIdTokenResult();
                        console.log('Firebase Auth Token Claims:', {
                            email: token.claims.email,
                            email_verified: token.claims.email_verified,
                            auth_time: token.claims.auth_time,
                            provider: token.claims.firebase?.sign_in_provider
                        });
                    }
                } catch (tokenError) {
                    console.warn('Could not retrieve auth token for debugging:', tokenError);
                }
                
                if (!authUser) {
                    console.warn('Authentication failed on form submission. User might need to sign in again.');
                    showError('Authentication required. Please sign in and try again.');
                    showAuthOverlay();
                    return;
                }
                
                // Update currentUser if it was null but Firebase has a user (mobile fix)
                if (!currentUser && authUser) {
                    currentUser = authUser;
                    console.log('Mobile auth fix: Updated currentUser from Firebase auth state');
                }

                

                // Security: Rate limiting check
                const userIP = await generateIPHash();
                if (!window.securityManager.checkRateLimit(userIP)) {
                    showError('Too many submission attempts. Please wait before trying again.');
                    return;
                }

                // Rate limiting check (legacy)
                const currentTime = Date.now();
                if (currentTime - lastSubmissionTime < SUBMISSION_COOLDOWN) {
                    showError('Please wait 30 seconds before submitting another application.');
                    return;
                }

                // Show loading state
                showLoadingState(true);

                try {
                    // Wait for Firebase to be loaded
                    if (!window.firebaseLoaded) {
                        
                        await new Promise((resolve, reject) => {
                            const timeout = setTimeout(() => {
                                reject(new Error('Firebase loading timeout'));
                            }, 10000); // 10 second timeout
                            
                            window.addEventListener('firebaseLoaded', () => {
                                clearTimeout(timeout);
                                resolve();
                            });
                            
                            // Check if Firebase is already loaded
                            if (window.firebaseLoaded) {
                                clearTimeout(timeout);
                                resolve();
                            }
                        });
                    }
                    

                    // Get form data
                    const formData = new FormData(recruitmentForm);
                    const applicationData = {};

                    // Security: Check honeypot field (bot protection)
                    const honeypotValue = formData.get('website');
                    if (!window.securityManager.validateHoneypot(honeypotValue)) {
                        // Silent fail for bots
                        showLoadingState(false);
                        return;
                    }

                    // Sanitize and validate inputs using security manager
                    for (let [key, value] of formData.entries()) {
                        // Skip honeypot field
                        if (key === 'website') continue;
                        
                        if (typeof value === 'string') {
                            // Use security manager for sanitization
                            const sanitizationType = getSanitizationType(key);
                            applicationData[key] = window.securityManager.sanitizeInput(value.trim(), sanitizationType);
                        } else {
                            applicationData[key] = value;
                        }
                    }

                    // Basic form validation
                    const validationErrors = performBasicValidation(applicationData);
                    if (validationErrors.length > 0) {
                        // Special handling for department validation errors
                        const departmentErrors = validationErrors.filter(error => 
                            error.includes('department') || error.includes('preference') || error.includes('different')
                        );
                        
                        if (departmentErrors.length > 0) {
                            // Highlight the department section with CSS class
                            const deptSection = document.getElementById('animated-department-selector');
                            if (deptSection) {
                                deptSection.classList.add('validation-error');
                                
                                // Remove highlight after 6 seconds
                                setTimeout(() => {
                                    deptSection.classList.remove('validation-error');
                                }, 6000);
                            }
                            
                            // Scroll to department section
                            deptSection?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                        
                        showError(validationErrors.join('<br>'));
                        return;
                    }

                    // Add metadata with security fingerprinting
                    applicationData.submissionTime = new Date().toISOString();
                    applicationData.timestamp = window.firebase?.serverTimestamp ? window.firebase.serverTimestamp() : new Date();
                    applicationData.userAgent = navigator.userAgent.substring(0, 200); // Limit length
                    applicationData.applicationId = window.securityManager.generateApplicationId();
                    applicationData.ipHash = await generateIPHash(); // Privacy-friendly IP tracking
                    applicationData.browserFingerprint = window.securityUtils.generateFingerprint();
                    applicationData.sessionToken = window.securityManager.sessionToken;
                    
                    // Add authenticated user information (using authUser for mobile compatibility)
                    applicationData.authenticatedUser = {
                        uid: authUser.uid,
                        email: authUser.email,
                        displayName: authUser.displayName,
                        photoURL: authUser.photoURL,
                        emailVerified: authUser.emailVerified,
                        authProvider: 'google.com',
                        signInTime: new Date().toISOString()
                    };
                    
                    
                    
                    // Submit to Firebase (if configured)
                    if (window.firebase && window.firebase.db) {
                        try {
                            // Use the consistent document ID based on user's email
                            const docId = window.currentUserDocId || hashEmail(applicationData.email);
                            
                            
                            // Create document reference
                            const docRef = window.firebase.doc(window.firebase.db, 'applications', docId);
                            
                            // Check if document exists to determine if it's an update
                            const existingDoc = await window.firebase.getDoc(docRef);
                            const isUpdate = existingDoc.exists();

                            // Log the operation
                            window.securityManager.logSecurityEvent(isUpdate ? 'FORM_UPDATE_INITIATED' : 'FORM_SUBMISSION_INITIATED', {
                                documentId: docId,
                                applicationId: applicationData.applicationId,
                                departmentPrimary: applicationData.departmentPrimary,
                                departmentSecondary: applicationData.departmentSecondary,
                                isUpdate: isUpdate
                            });

                            // Use setDoc to create or update the document with the specific ID
                            await window.firebase.setDoc(docRef, {
                                ...applicationData,
                                ...(isUpdate ? { updatedAt: window.firebase.serverTimestamp() } : {}),
                                createdAt: isUpdate ? existingDoc.data().createdAt : window.firebase.serverTimestamp()
                            }, { merge: false }); // Don't merge - replace entire document
                            
                            
                            // Store the document ID for future use
                            window.currentUserDocId = docId;
                            
                            // Log successful submission
                            window.securityManager.logSecurityEvent(isUpdate ? 'FORM_UPDATE_SUCCESS' : 'FORM_SUBMISSION_SUCCESS', {
                                documentId: docId,
                                applicationId: applicationData.applicationId,
                                departmentPrimary: applicationData.departmentPrimary,
                                departmentSecondary: applicationData.departmentSecondary,
                                isUpdate: isUpdate
                            });

                            // Show success message
                            showSuccess(isUpdate);
                            
                            // Update submit button text for future submissions
                            const submitBtn = document.querySelector('button[type="submit"]');
                            if (submitBtn) {
                                const btnText = submitBtn.querySelector('.btn-text');
                                if (btnText) {
                                    btnText.textContent = 'Update Application';
                                }
                            }
                            
                            // Don't reset form - let user continue editing
                            
                            // Clear department selections
                            const departmentOptions = document.querySelectorAll('.department-option');
                            departmentOptions.forEach(opt => opt.classList.remove('selected'));
                            
                            // Clear hidden department fields
                            document.getElementById('department-primary').value = '';
                            document.getElementById('department-secondary').value = '';
                            
                            // Trigger reset event for React component
                            window.dispatchEvent(new CustomEvent('resetDepartmentSelector'));
                            
                            // Update rate limiting
                            lastSubmissionTime = currentTime;
                            
                            return; // Success complete
                            
                        } catch (firebaseError) {
                            console.error('Firebase submission error:', firebaseError);
                            
                            
                            // Log failed submission
                            window.securityManager.logSecurityEvent('FORM_SUBMISSION_FAILED', {
                                errorCode: firebaseError.code,
                                errorMessage: firebaseError.message
                            });
                            
                            // Show specific Firebase error or fallback to generic message
                            if (firebaseError.code === 'permission-denied') {
                                showError('Permission denied. Please check Firestore security rules.');
                            } else if (firebaseError.code === 'unavailable') {
                                showError('Firebase service unavailable. Please try again later.');
                            } else {
                                showError(`Firebase error: ${firebaseError.message}`);
                            }
                            return;
                        }
                    } else {
                        // Enhanced fallback logging
                        console.warn('Firebase not configured properly!');
                        
                        
                        showError('Firebase not configured. Please check the console for more details.');
                        return;
                    }

                } catch (error) {
                    console.error('Application submission error:', error);
                    
                    // Log error
                    window.securityManager.logSecurityEvent('FORM_SUBMISSION_ERROR', {
                        errorMessage: error.message,
                        errorStack: error.stack
                    });
                    
                    showError(`An unexpected error occurred: ${error.message}`);
                } finally {
                    showLoadingState(false);
                }
            });

            // Helper function to determine sanitization type
            function getSanitizationType(fieldName) {
                switch (fieldName) {
                    case 'firstName':
                    case 'lastName':
                        return 'name';
                    case 'email':
                        return 'email';
                    case 'phone':
                        return 'phone';
                    case 'regNumber':
                        return 'regNumber';
                    case 'departmentPrimary':
                    case 'departmentSecondary':
                        return 'department';
                    case 'skills':
                    case 'motivation':
                    case 'contribution':
                        return 'text';
                    default:
                        return 'default';
                }
            }

            // Enhanced validation function using security manager
            function performBasicValidation(applicationData) {
                const errors = [];
                
                // Basic validation rules
                const requiredFields = {
                    firstName: 'First Name',
                    lastName: 'Last Name', 
                    email: 'Email',
                    phone: 'Phone Number',
                    regNumber: 'Registration Number',
                    departmentPrimary: 'Primary Department (1st Preference)',
                    departmentSecondary: 'Secondary Department (2nd Preference)',
                    skills: 'Skills',
                    motivation: 'Motivation',
                    contribution: 'Creativity'
                };

                // Check required fields
                for (const [fieldName, displayName] of Object.entries(requiredFields)) {
                    if (!applicationData[fieldName] || applicationData[fieldName].trim() === '') {
                        errors.push(`${displayName} is required`);
                    }
                }

                // Specific department validation
                const primaryDept = applicationData.departmentPrimary?.trim();
                const secondaryDept = applicationData.departmentSecondary?.trim();
                
                if (!primaryDept) {
                    errors.push('Please select your 1st preference department');
                }
                
                if (!secondaryDept) {
                    errors.push('Please select your 2nd preference department');
                }
                
                // Ensure different departments are selected
                if (primaryDept && secondaryDept && primaryDept === secondaryDept) {
                    errors.push('Primary and Secondary departments must be different');
                }

                // Basic email validation
                if (applicationData.email) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(applicationData.email)) {
                        errors.push('Please enter a valid email address');
                    }
                }

                // Check minimum lengths for text fields
                if (applicationData.skills && applicationData.skills.trim().length < 10) {
                    errors.push('Skills description should be at least 10 characters');
                }
                
                if (applicationData.motivation && applicationData.motivation.trim().length < 10) {
                    errors.push('Motivation should be at least 10 characters');
                }

                if (applicationData.contribution && applicationData.contribution.trim().length < 2) {
                    errors.push('Please describe cybersecurity in your own terms');
                }

                return errors;
            }

            function generateApplicationId() {
                return 'APP_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9).toUpperCase();
            }

            // Generate privacy-friendly IP hash
            async function generateIPHash() {
                try {
                    // Get approximate location without exact IP
                    const response = await fetch('https://ipapi.co/json/');
                    const data = await response.json();
                    const locationString = `${data.country_code || 'XX'}_${data.region_code || 'XX'}`;
                    
                    // Create a simple hash
                    let hash = 0;
                    for (let i = 0; i < locationString.length; i++) {
                        const char = locationString.charCodeAt(i);
                        hash = ((hash << 5) - hash) + char;
                        hash = hash & hash; // Convert to 32-bit integer
                    }
                    return hash.toString(36);
                } catch {
                    return 'unknown';
                }
            }

            // Generate browser fingerprint for security
            function generateBrowserFingerprint() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillText('Security check', 2, 2);
                
                return {
                    screen: `${screen.width}x${screen.height}`,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    language: navigator.language,
                    platform: navigator.platform.substring(0, 20), // Limit length
                    canvas: canvas.toDataURL().substring(0, 50), // Limit length
                    timestamp: Date.now()
                };
            }

            function showLoadingState(loading) {
                if (loading) {
                    submitBtn.disabled = true;
                    btnText.style.display = 'none';
                    loadingSpinner.style.display = 'inline-block';
                    submitBtn.style.opacity = '0.7';
                } else {
                    submitBtn.disabled = false;
                    btnText.style.display = 'inline-block';
                    loadingSpinner.style.display = 'none';
                    submitBtn.style.opacity = '1';
                }
            }

            function showSuccess(isUpdate = false) {
                formMessages.style.display = 'block';
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                
                // Update success message based on whether it's a new submission or update
                const messageElement = successMessage.querySelector('h3') || successMessage.querySelector('p') || successMessage;
                if (isUpdate) {
                    messageElement.innerHTML = `
                        <h3>Application Updated Successfully!</h3>
                        <p>Your application has been updated. You can continue editing at any time.</p>
                    `;
                } else {
                    messageElement.innerHTML = `
                        <h3>Application Submitted Successfully!</h3>
                        <p>Thank you for your application! You can sign in again to edit your responses if needed.</p>
                    `;
                }
                
                // Scroll to message
                formMessages.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Hide after 7 seconds (longer to read the message)
                setTimeout(() => {
                    formMessages.style.display = 'none';
                    successMessage.style.display = 'none';
                }, 7000);
            }

            function showError(message) {
                formMessages.style.display = 'block';
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
                errorMessage.querySelector('p').innerHTML = message;
                
                // Scroll to message
                formMessages.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Hide after 5 seconds
                setTimeout(() => {
                    formMessages.style.display = 'none';
                    errorMessage.style.display = 'none';
                }, 5000);
            }

            // Security: Disable right-click on form (basic protection)
            recruitmentForm.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });

            // Security: Disable copy/paste on sensitive fields
            const sensitiveFields = ['regNumber', 'phone'];
            sensitiveFields.forEach(fieldName => {
                const field = document.getElementById(fieldName);
                if (field) {
                    field.addEventListener('paste', function(e) {
                        e.preventDefault();
                    });
                }
            });
        });
    </script>
    
    <!-- Tilted Card Effect -->
    <script src="tilted-card.js"></script>
    <script src="scroll-restriction.js"></script>
</body>
</html>